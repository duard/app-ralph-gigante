import{j as e,c as M,r as h}from"./index-QsB6Q8YM.js";import{D as A,c as Z,E as G,d as _,g as j,h as D,S as L,l as I,i as T,j as b,k as C,p as re,B as Y}from"./base-layout-bvzUob4N.js";import{B as f}from"./button-3qgFZeEO.js";import{A as F,a as U,b as B}from"./avatar-BxJEn-Za.js";import{f as ne,U as $,B as K,T as ie,X as le}from"./import-modal-DgDteAyK.js";import{I as oe}from"./label-DfnrB8Kz.js";import{S as X}from"./scroll-area-Cb3oh3PT.js";import{c as ce,R as de,S as me}from"./react-aM2Zy0U8.js";import{c as x}from"./index-D6HeJSDc.js";import{i as H}from"./isToday-BLHjZstM.js";import{n as ue,s as W,f as V,c as O,j as he,h as pe,k as xe,i as N}from"./isSameYear-BAW_uSg8.js";import{E as J}from"./ellipsis-D57xpxDZ.js";import{T as fe}from"./trash-2-sC1VgEN_.js";import{F as ge}from"./file-text-D678MoR7.js";import{M as ye}from"./menu-BmM6__yS.js";import"./card-CsPl9_wy.js";import"./index-DSlOan4b.js";import"./index-ClyebAN5.js";const je=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Q=x("bell-off",je);const ve=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],we=x("check-check",ve);const Ne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ke=x("copy",Ne);const Me=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Te=x("funnel",Me);const be=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ce=x("hash",be);const Se=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ie=x("image",Se);const Ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],De=x("info",Ee);const Ae=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Ze=x("mic",Ae);const _e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ze=x("paperclip",_e);const Pe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Le=x("phone",Pe);const $e=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],He=x("pin",$e);const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Fe=x("smile",Re);const Ue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Be=x("user-plus",Ue);const Ve=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Oe=x("video",Ve);const qe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Ye=x("volume-x",qe);function We(s,i,t){const[a,l]=ue(t?.in,s,i);return+W(a,t)==+W(l,t)}function Qe(s,i){return We(O(s,s),V(s),i)}function Ge(s,i){return he(O(s,s),V(s))}function Ke(s,i,t){return pe(s,-1,t)}function R(s,i){return xe(O(s,s),Ke(V(s)))}const ee=ce((s,i)=>({conversations:[],messages:{},users:[],selectedConversation:null,searchQuery:"",isTyping:{},onlineUsers:[],setConversations:t=>s({conversations:t}),setMessages:(t,a)=>s(l=>({messages:{...l.messages,[t]:a}})),setUsers:t=>s({users:t}),setSelectedConversation:t=>{s({selectedConversation:t}),t&&i().markAsRead(t)},setSearchQuery:t=>s({searchQuery:t}),addMessage:(t,a)=>s(l=>({messages:{...l.messages,[t]:[...l.messages[t]||[],a]},conversations:l.conversations.map(d=>d.id===t?{...d,lastMessage:{id:a.id,content:a.content,timestamp:a.timestamp,senderId:a.senderId}}:d)})),markAsRead:t=>s(a=>({conversations:a.conversations.map(l=>l.id===t?{...l,unreadCount:0}:l)})),togglePin:t=>s(a=>({conversations:a.conversations.map(l=>l.id===t?{...l,isPinned:!l.isPinned}:l)})),toggleMute:t=>s(a=>({conversations:a.conversations.map(l=>l.id===t?{...l,isMuted:!l.isMuted}:l)})),setTyping:(t,a)=>s(l=>({isTyping:{...l.isTyping,[t]:a}})),setOnlineUsers:t=>s({onlineUsers:t})}));function Xe(s){const i=new Date(s);return H(i)?N(i,"h:mm a"):R(i)?"Yesterday":Qe(i)?N(i,"EEEE"):Ge(i)?N(i,"MMM d"):N(i,"dd/MM/yy")}function Je({conversations:s,selectedConversation:i,onSelectConversation:t}){const{searchQuery:a,setSearchQuery:l}=ee(),m=s.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())).sort((n,c)=>n.isPinned&&!c.isPinned?-1:!n.isPinned&&c.isPinned?1:new Date(c.lastMessage.timestamp).getTime()-new Date(n.lastMessage.timestamp).getTime()),u=n=>n.type==="direct"&&n.participants.length===1?Math.random()>.5:!1;return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between h-16 px-4 border-b flex-shrink-0",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Messages"}),e.jsxs(A,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 cursor-pointer",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(_,{align:"end",children:[e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"New Chat"]}),e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Filter Messages"]}),e.jsx(D,{}),e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Chat Settings"]})]})]})]}),e.jsx("div",{className:"px-4 py-3 border-b flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{type:"text",placeholder:"Search conversations...",value:a,onChange:n=>l(n.target.value),className:"pl-9 cursor-text"})]})}),e.jsx(X,{className:"flex-1",children:e.jsx("div",{className:"p-2",children:m.map(n=>e.jsxs("div",{className:M("flex items-center gap-3 p-3 rounded-lg cursor-pointer relative overflow-hidden hover:bg-accent/50 transition-colors",i===n.id?"bg-accent text-accent-foreground":""),onClick:()=>t(n.id),children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(F,{className:M("h-12 w-12",i===n.id&&"ring-2 ring-background"),children:[e.jsx(U,{src:n.avatar,alt:n.name}),e.jsx(B,{className:"text-sm",children:n.type==="group"?e.jsx($,{className:"h-5 w-5"}):n.name.split(" ").map(c=>c[0]).join("").slice(0,2)})]}),n.type==="direct"&&u(n)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 bg-green-500 border-2 border-background rounded-full"}),n.type==="group"&&e.jsx("div",{className:"absolute -bottom-1 -right-1 h-4 w-4 bg-blue-500 border-2 border-background rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"h-2 w-2 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1 overflow-hidden pr-2",children:[e.jsx("h3",{className:"font-medium truncate min-w-0 max-w-[160px] lg:max-w-[180px]",children:n.name}),n.isPinned&&e.jsx(He,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),n.isMuted&&e.jsx(Ye,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"})]}),e.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0 whitespace-nowrap",children:Xe(n.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground truncate flex-1 min-w-0 max-w-[180px] lg:max-w-[200px] pr-2",children:n.lastMessage.content}),n.unreadCount>0&&e.jsx(K,{variant:"default",className:"min-w-[20px] h-5 text-xs cursor-pointer flex-shrink-0",children:n.unreadCount>99?"99+":n.unreadCount})]})]})]},n.id))})})]})}function es({conversation:s,users:i,onToggleMute:t,onToggleInfo:a}){if(!s)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"Select a conversation to start chatting"})});const d=s.type==="direct"?i.filter(c=>s.participants.includes(c.id)):i.filter(c=>s.participants.includes(c.id)),m=d[0],u=()=>{if(s.type==="group"){const c=d.filter(k=>k.status==="online").length;return`${s.participants.length} members, ${c} online`}else if(m)switch(m.status){case"online":return"Active now";case"away":return"Away";case"offline":return`Last seen ${new Date(m.lastSeen).toLocaleDateString()}`;default:return""}return""},n=()=>{if(s.type==="group")return"text-muted-foreground";switch(m?.status){case"online":return"text-green-600";case"away":return"text-yellow-600";case"offline":return"text-muted-foreground";default:return"text-muted-foreground"}};return e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(F,{className:"h-10 w-10 cursor-pointer",children:[e.jsx(U,{src:s.avatar,alt:s.name}),e.jsx(B,{children:s.type==="group"?e.jsx($,{className:"h-5 w-5"}):s.name.split(" ").map(c=>c[0]).join("").slice(0,2)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-semibold truncate",children:s.name}),s.isMuted&&e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),s.type==="group"&&e.jsx(K,{variant:"secondary",className:"text-xs cursor-pointer",children:"Group"})]}),e.jsx("p",{className:`text-sm ${n()}`,children:u()})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(I,{children:[e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(L,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"Search in conversation"})})]}),e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(Le,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"Voice call"})})]}),e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(Oe,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"Video call"})})]}),e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",onClick:a,className:"cursor-pointer",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"Conversation info"})})]})]}),e.jsxs(A,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",className:"cursor-pointer",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(_,{align:"end",children:[e.jsx(j,{onClick:t,className:"cursor-pointer",children:s.isMuted?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Unmute conversation"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Mute conversation"]})}),e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Search messages"]}),s.type==="group"&&e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs(j,{className:"cursor-pointer",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Manage members"]})]}),e.jsx(D,{}),e.jsx(j,{className:"cursor-pointer text-destructive",children:"Delete conversation"})]})]})]})]})}function ss({messages:s,users:i,currentUserId:t="current-user"}){const a=h.useRef(null),l=h.useRef(null),d=h.useRef(0),m=h.useRef(!0),u=h.useRef(null);h.useEffect(()=>{const o=s.length>0?s[0]?.id?.split("-")[0]:null;o!==u.current&&(m.current=!0,u.current=o)},[s]),h.useEffect(()=>{if(m.current){m.current=!1,d.current=s.length;return}s.length>d.current&&l.current&&l.current.scrollIntoView({behavior:"smooth"}),d.current=s.length},[s]);const n=o=>o===t?{id:t,name:"You",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=male-7",status:"online",email:"you@example.com",lastSeen:new Date().toISOString(),role:"Developer",department:"Engineering"}:i.find(r=>r.id===o),c=o=>{const r=new Date(o);return H(r)?N(r,"HH:mm"):R(r)?`Yesterday ${N(r,"HH:mm")}`:N(r,"MMM d, HH:mm")},k=(o,r)=>o.senderId===t?!1:r===0?!0:s[r-1].senderId!==o.senderId,w=(o,r)=>o.senderId===t?!1:r===0?!0:s[r-1].senderId!==o.senderId,p=(o,r)=>{if(r===0)return!1;const y=s[r-1],v=new Date(o.timestamp).getTime()-new Date(y.timestamp).getTime();return y.senderId===o.senderId&&v<300*1e3},S=o=>{const r=[];return o.forEach(y=>{const v=N(new Date(y.timestamp),"yyyy-MM-dd"),g=r[r.length-1];g&&g.date===v?g.messages.push(y):r.push({date:v,messages:[y]})}),r},z=o=>{const r=new Date(o);return H(r)?"Today":R(r)?"Yesterday":N(r,"EEEE, MMMM d")},P=S(s);return e.jsx(X,{className:"flex-1 px-4",ref:a,children:e.jsxs("div",{className:"space-y-4 py-4",children:[P.map(o=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-center py-2",children:e.jsx("div",{className:"text-xs text-muted-foreground bg-background px-3 py-1 rounded-full border",children:z(o.date)})}),e.jsx("div",{className:"space-y-1",children:o.messages.map((r,y)=>{const v=n(r.senderId),g=r.senderId===t,se=k(r,y),te=w(r,y),q=p(r,y);return e.jsxs("div",{className:M("flex gap-3 group",g&&"flex-row-reverse",q&&!g&&"ml-12"),children:[!g&&e.jsx("div",{className:"w-8",children:se&&v&&e.jsxs(F,{className:"h-8 w-8 cursor-pointer",children:[e.jsx(U,{src:v.avatar,alt:v.name}),e.jsx(B,{className:"text-xs",children:v.name.split(" ").map(E=>E[0]).join("").slice(0,2)})]})}),e.jsxs("div",{className:M("flex-1 max-w-[70%]",g&&"flex flex-col items-end"),children:[te&&v&&!g&&e.jsx("div",{className:"text-sm font-medium text-foreground mb-1",children:v.name}),e.jsxs("div",{className:"relative group/message",children:[e.jsxs("div",{className:M("rounded-lg px-3 py-2 text-sm break-words",g?"bg-primary text-primary-foreground":"bg-muted",q&&"mt-1"),children:[e.jsx("p",{children:r.content}),r.reactions.length>0&&e.jsx("div",{className:"flex gap-1 mt-2",children:r.reactions.map((E,ae)=>e.jsxs("div",{className:M("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs border cursor-pointer","bg-background/90 backdrop-blur-sm shadow-sm"),children:[e.jsx("span",{children:E.emoji}),e.jsx("span",{className:"text-muted-foreground",children:E.count})]},ae))}),e.jsxs("div",{className:M("flex items-center gap-1 mt-1 text-xs",g?"text-primary-foreground/70 justify-end":"text-muted-foreground"),children:[e.jsx("span",{children:c(r.timestamp)}),r.isEdited&&e.jsx("span",{className:"italic",children:"(edited)"}),g&&e.jsx("div",{className:"flex",children:e.jsx(we,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"absolute top-0 right-0 opacity-0 group-hover/message:opacity-100",children:e.jsxs(A,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 cursor-pointer",children:e.jsx(J,{className:"h-3 w-3"})})}),e.jsxs(_,{align:"end",children:[e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Reply"]}),e.jsxs(j,{className:"cursor-pointer",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Copy"]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs(j,{className:"cursor-pointer text-destructive",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]})]})]},r.id)})})]},o.date)),e.jsx("div",{ref:l})]})})}function ts({onSendMessage:s,disabled:i=!1,placeholder:t="Type a message..."}){const[a,l]=h.useState(""),[d,m]=h.useState(!1),u=h.useRef(null),n=()=>{const p=a.trim();p&&!i&&(s(p),l(""),m(!1),u.current&&(u.current.style.height="auto"))},c=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),n())},k=p=>{const S=p.target.value;l(S),u.current&&(u.current.style.height="auto",u.current.style.height=`${Math.min(u.current.scrollHeight,120)}px`),S.trim()&&!d?m(!0):!S.trim()&&d&&m(!1)},w=p=>{console.log(`Upload ${p}`)};return e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(I,{children:e.jsxs(A,{children:[e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(Z,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",disabled:i,className:"cursor-pointer disabled:cursor-not-allowed",children:e.jsx(ze,{className:"h-4 w-4"})})})}),e.jsx(C,{children:e.jsx("p",{children:"Attach file"})})]}),e.jsxs(_,{side:"top",align:"start",children:[e.jsxs(j,{onClick:()=>w("image"),className:"cursor-pointer",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Photo or video"]}),e.jsxs(j,{onClick:()=>w("file"),className:"cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Document"]})]})]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ie,{ref:u,placeholder:t,value:a,onChange:k,onKeyDown:c,disabled:i,className:M("min-h-[40px] max-h-[120px] resize-none cursor-text disabled:cursor-not-allowed","pr-20"),rows:1}),e.jsxs("div",{className:"absolute right-2 bottom-2 flex items-center gap-1",children:[e.jsx(I,{children:e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",disabled:i,className:"h-6 w-6 p-0 cursor-pointer disabled:cursor-not-allowed",children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"Add emoji"})})]})}),e.jsx(I,{children:e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",disabled:i,className:"h-6 w-6 p-0 cursor-pointer disabled:cursor-not-allowed",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:"More options"})})]})})]})]}),e.jsx(I,{children:e.jsxs(T,{children:[e.jsx(b,{asChild:!0,children:a.trim()?e.jsx(f,{onClick:n,disabled:i,className:"cursor-pointer disabled:cursor-not-allowed",children:e.jsx(me,{className:"h-4 w-4"})}):e.jsx(f,{variant:"ghost",size:"icon",disabled:i,className:"cursor-pointer disabled:cursor-not-allowed",children:e.jsx(Ze,{className:"h-4 w-4"})})}),e.jsx(C,{children:e.jsx("p",{children:a.trim()?"Send message":"Voice message"})})]})})]}),d&&e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"You are typing..."})]})}function as({conversations:s,messages:i,users:t}){const{selectedConversation:a,setSelectedConversation:l,setConversations:d,setMessages:m,setUsers:u,addMessage:n,toggleMute:c}=ee(),[k,w]=h.useState(!1);h.useEffect(()=>{const o=()=>{window.innerWidth>=1024&&w(!1)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),h.useEffect(()=>{d(s),u(t),Object.entries(i).forEach(([o,r])=>{m(o,r)}),!a&&s.length>0&&l(s[0].id)},[s,i,t,a,d,m,u,l]);const p=s.find(o=>o.id===a),S=a?i[a]||[]:[],z=o=>{if(!a)return;const r={id:`msg-${Date.now()}`,content:o,timestamp:new Date().toISOString(),senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null};n(a,r)},P=()=>{a&&c(a)};return e.jsx(I,{delayDuration:0,children:e.jsxs("div",{className:"h-full min-h-[600px] max-h-[calc(100vh-200px)] flex rounded-lg border overflow-hidden bg-background",children:[k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>w(!1)}),e.jsxs("div",{className:`
          w-100 border-r bg-background flex-shrink-0
          ${k?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          lg:relative lg:block
          fixed inset-y-0 left-0 z-50
          transition-transform duration-300 ease-in-out
        `,children:[e.jsxs("div",{className:"lg:hidden p-4 border-b flex items-center justify-between bg-background",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Messages"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>w(!1),className:"cursor-pointer",children:e.jsx(le,{className:"h-4 w-4"})})]}),e.jsx(Je,{conversations:s,selectedConversation:a,onSelectConversation:o=>{l(o),w(!1)}})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:[e.jsxs("div",{className:"flex items-center h-16 px-4 border-b bg-background",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"cursor-pointer lg:hidden mr-2",children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx(es,{conversation:p||null,users:t,onToggleMute:P})})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:a?e.jsxs(e.Fragment,{children:[e.jsx(ss,{messages:S,users:t}),e.jsx(ts,{onSendMessage:z,placeholder:`Message ${p?.name||""}...`})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Welcome to Chat"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a conversation to start messaging"})]})})})]})]})})}const rs=[{id:"conv-1",type:"direct",participants:["1"],name:"Sarah Mitchell",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-",lastMessage:{id:"msg-1-4",content:"Thanks for the quick update! The dashboard looks amazing ðŸŽ‰",timestamp:"2025-08-11T15:30:00Z",senderId:"1"},unreadCount:2,isPinned:!0,isMuted:!1},{id:"conv-2",type:"group",participants:["2","3","5"],name:"Project Alpha",lastMessage:{id:"msg-2-8",content:"David: Marketing campaign is scheduled for next week",timestamp:"2025-08-11T08:15:00Z",senderId:"2"},unreadCount:0,isPinned:!1,isMuted:!1},{id:"conv-3",type:"group",participants:["2","3","5"],name:"Frontend Team",lastMessage:{id:"msg-3-6",content:"Alex: The new component library is ready for testing",timestamp:"2025-08-11T23:45:00Z",senderId:"3"},unreadCount:1,isPinned:!1,isMuted:!1},{id:"conv-4",type:"direct",participants:["3"],name:"Emily Rodriguez",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-2",lastMessage:{id:"msg-4-3",content:"Let's review the wireframes together tomorrow",timestamp:"2025-08-10T16:30:00Z",senderId:"3"},unreadCount:1,isPinned:!1,isMuted:!1},{id:"conv-5",type:"direct",participants:["5"],name:"Lisa Chen",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-4",lastMessage:{id:"msg-5-3",content:"Found a few edge cases in the new feature",timestamp:"2025-08-06T14:20:00Z",senderId:"5"},unreadCount:0,isPinned:!1,isMuted:!0},{id:"conv-6",type:"direct",participants:["2"],name:"Alex Thompson",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=male-1",lastMessage:{id:"msg-6-3",content:"Code review completed, looks good to merge! ðŸ‘",timestamp:"2025-01-15T17:45:00Z",senderId:"2"},unreadCount:0,isPinned:!1,isMuted:!1}],ns={"conv-1":[{id:"msg-1-1",content:"Hey! How's the new dashboard coming along?",timestamp:"2024-01-15T10:15:00Z",senderId:"1",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-1-2",content:"It's going great! We've implemented the new design system and it looks fantastic.",timestamp:"2024-01-15T10:17:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[{emoji:"ðŸ‘",users:["1"],count:1}],replyTo:null},{id:"msg-1-3",content:"That's awesome! Can you share a preview?",timestamp:"2024-01-15T10:18:00Z",senderId:"1",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-1-4",content:"Thanks for the quick update! The dashboard looks amazing ðŸŽ‰",timestamp:"2024-01-15T10:30:00Z",senderId:"1",type:"text",isEdited:!1,reactions:[{emoji:"â¤ï¸",users:["current-user"],count:1}],replyTo:null}],"conv-2":[{id:"msg-2-1",content:"Hey team! The component library update is ready",timestamp:"2024-01-15T09:00:00Z",senderId:"2",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-2-2",content:"Awesome work Alex! ðŸš€",timestamp:"2024-01-15T09:05:00Z",senderId:"3",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-2-3",content:"I've tested the new Button and Input components, they work perfectly",timestamp:"2024-01-15T09:10:00Z",senderId:"5",type:"text",isEdited:!1,reactions:[{emoji:"âœ…",users:["2","3"],count:2}],replyTo:null},{id:"msg-2-4",content:"Great! I'll start integrating them into the main app",timestamp:"2024-01-15T09:15:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null}],"conv-3":[{id:"msg-3-1",content:"Hi! I've completed the wireframes for the new user onboarding flow",timestamp:"2024-01-15T09:30:00Z",senderId:"3",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-3-2",content:"That's fantastic Emily! When can we review them?",timestamp:"2024-01-15T09:32:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-3-3",content:"How about tomorrow at 2 PM? I'll share my screen and walk through the designs",timestamp:"2024-01-15T09:35:00Z",senderId:"3",type:"text",isEdited:!1,reactions:[{emoji:"ðŸ‘",users:["current-user"],count:1}],replyTo:null},{id:"msg-3-4",content:"Perfect! Looking forward to it",timestamp:"2024-01-15T09:40:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null}],"conv-4":[{id:"msg-4-1",content:"Hi! I've been working on the wireframes for the new feature",timestamp:"2025-08-10T14:15:00Z",senderId:"3",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-4-2",content:"That's great! I'd love to take a look at them",timestamp:"2025-08-10T14:18:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-4-3",content:"Let's review the wireframes together tomorrow",timestamp:"2025-08-10T16:30:00Z",senderId:"3",type:"text",isEdited:!1,reactions:[{emoji:"ðŸ‘",users:["current-user"],count:1}],replyTo:null}],"conv-5":[{id:"msg-5-1",content:"I've been testing the new feature and it looks good overall",timestamp:"2025-08-06T13:45:00Z",senderId:"5",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-5-2",content:"Thanks for testing it! Any issues you found?",timestamp:"2025-08-06T14:10:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-5-3",content:"Found a few edge cases in the new feature",timestamp:"2025-08-06T14:20:00Z",senderId:"5",type:"text",isEdited:!1,reactions:[],replyTo:null}],"conv-6":[{id:"msg-6-1",content:"Hey! I've finished the code review for the latest PR",timestamp:"2025-01-15T16:30:00Z",senderId:"2",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-6-2",content:"Thanks for the quick review! Any feedback?",timestamp:"2025-01-15T17:15:00Z",senderId:"current-user",type:"text",isEdited:!1,reactions:[],replyTo:null},{id:"msg-6-3",content:"Code review completed, looks good to merge! ðŸ‘",timestamp:"2025-01-15T17:45:00Z",senderId:"2",type:"text",isEdited:!1,reactions:[{emoji:"ðŸŽ‰",users:["current-user"],count:1}],replyTo:null}]},is=[{id:"1",name:"Sarah Mitchell",email:"sarah.mitchell@example.com",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-",status:"online",lastSeen:"2024-01-15T10:30:00Z",role:"Project Manager",department:"Product"},{id:"2",name:"Alex Thompson",email:"alex.thompson@example.com",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=male-1",status:"away",lastSeen:"2024-01-15T09:45:00Z",role:"Senior Developer",department:"Engineering"},{id:"3",name:"Emily Rodriguez",email:"emily.rodriguez@example.com",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-2",status:"online",lastSeen:"2024-01-15T10:25:00Z",role:"UX Designer",department:"Design"},{id:"4",name:"David Kim",email:"david.kim@example.com",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=male-5",status:"offline",lastSeen:"2024-01-14T18:30:00Z",role:"Marketing Lead",department:"Marketing"},{id:"5",name:"Lisa Chen",email:"lisa.chen@example.com",avatar:"https://notion-avatars.netlify.app/api/avatar/?preset=female-4",status:"online",lastSeen:"2024-01-15T10:20:00Z",role:"QA Engineer",department:"Engineering"}];function Ts(){const[s,i]=h.useState([]),[t,a]=h.useState({}),[l,d]=h.useState([]),[m,u]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{i(rs),a(ns),d(is)}catch(c){console.error("Failed to load chat data:",c)}finally{u(!1)}})()},[]),m?e.jsx(Y,{title:"Chat",description:"Team communication and messaging",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading chat..."})})}):e.jsx(Y,{title:"Chat",description:"Team communication and messaging",children:e.jsx("div",{className:"px-4 md:px-6",children:e.jsx(as,{conversations:s,messages:t,users:l})})})}export{Ts as default};
